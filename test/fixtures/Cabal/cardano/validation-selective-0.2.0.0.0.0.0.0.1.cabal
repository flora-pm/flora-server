cabal-version:   2.4
name:            validation-selective
version:         0.2.0.0.0.0.0.0.1
license:         MPL-2.0
license-file:    LICENSE
copyright:       2020-2023 Kowainik
maintainer:      Kowainik <xrom.xkov@gmail.com>
author:          Dmitrii Kovanikov, Veronika Romashkina
tested-with:
    ghc ==8.6.5 ghc ==8.8.4 ghc ==8.10.7 ghc ==9.0.2 ghc ==9.2.7
    ghc ==9.4.4 ghc ==9.6.1

homepage:        https://github.com/kowainik/validation-selective
bug-reports:     https://github.com/kowainik/validation-selective/issues
synopsis:
    Lighweight pure data validation based on Applicative and Selective functors

description:
    Lighweight pure data validation based on Applicative and Selective
    functors. The library builds validation interface around the
    following data type:
    .
    @
    __data__ Validation e a
    \    = Failure e
    \    | Success a
    @
    .

category:        Validation, Selective, Data
build-type:      Simple
extra-doc-files:
    README.md
    CHANGELOG.md

source-repository head
    type:     git
    location: https://github.com/kowainik/validation-selective.git

library
    exposed-modules:
        Validation
        Validation.Combinators

    hs-source-dirs:     src
    default-language:   Haskell2010
    default-extensions:
        ConstraintKinds DeriveGeneric DerivingStrategies
        GeneralizedNewtypeDeriving InstanceSigs KindSignatures LambdaCase
        OverloadedStrings RecordWildCards ScopedTypeVariables
        StandaloneDeriving TupleSections TypeApplications ViewPatterns

    ghc-options:
        -Wall -Wcompat -Widentities -Wincomplete-uni-patterns
        -Wincomplete-record-updates -Wredundant-constraints
        -fhide-source-paths -Wmissing-export-lists -Wpartial-fields

    build-depends:
        base >=4.12 && <4.20,
        deepseq ^>=1.4.3.0,
        selective >=0.3 && <0.7

    if impl(ghc >=8.8)
        ghc-options: -Wmissing-deriving-strategies

    if impl(ghc >=8.10)
        ghc-options: -Wunused-packages

    if impl(ghc >=9.0)
        ghc-options: -Winvalid-haddock

    if impl(ghc >=9.2)
        ghc-options: -Wredundant-bang-patterns -Woperator-whitespace

test-suite validation-selective-test
    type:               exitcode-stdio-1.0
    main-is:            Spec.hs
    hs-source-dirs:     test
    other-modules:
        Test.Gen
        Test.Laws
        Test.Properties

    default-language:   Haskell2010
    default-extensions:
        ConstraintKinds DeriveGeneric DerivingStrategies
        GeneralizedNewtypeDeriving InstanceSigs KindSignatures LambdaCase
        OverloadedStrings RecordWildCards ScopedTypeVariables
        StandaloneDeriving TupleSections TypeApplications ViewPatterns

    ghc-options:
        -Wall -Wcompat -Widentities -Wincomplete-uni-patterns
        -Wincomplete-record-updates -Wredundant-constraints
        -fhide-source-paths -Wmissing-export-lists -Wpartial-fields
        -threaded -rtsopts -with-rtsopts=-N

    build-depends:
        base >=4.12 && <4.20,
        validation-selective,
        hedgehog >=1.0 && <1.3,
        hspec >=2.7.1 && <2.11,
        hspec-hedgehog ^>=0.0.1.1,
        selective,
        text >=1.2.3 && <2.1

    if impl(ghc >=8.8)
        ghc-options: -Wmissing-deriving-strategies

    if impl(ghc >=8.10)
        ghc-options: -Wunused-packages

    if impl(ghc >=9.0)
        ghc-options: -Winvalid-haddock

    if impl(ghc >=9.2)
        ghc-options: -Wredundant-bang-patterns -Woperator-whitespace

test-suite validation-selective-doctest
    type:               exitcode-stdio-1.0
    main-is:            Doctest.hs
    hs-source-dirs:     test
    default-language:   Haskell2010
    default-extensions:
        ConstraintKinds DeriveGeneric DerivingStrategies
        GeneralizedNewtypeDeriving InstanceSigs KindSignatures LambdaCase
        OverloadedStrings RecordWildCards ScopedTypeVariables
        StandaloneDeriving TupleSections TypeApplications ViewPatterns

    ghc-options:
        -Wall -Wcompat -Widentities -Wincomplete-uni-patterns
        -Wincomplete-record-updates -Wredundant-constraints
        -fhide-source-paths -Wmissing-export-lists -Wpartial-fields
        -threaded

    build-depends:
        base >=4.12 && <4.20,
        doctest >=0.16 && <0.22

    if impl(ghc >=8.8)
        ghc-options: -Wmissing-deriving-strategies

    if impl(ghc >=8.10)
        ghc-options: -Wunused-packages

    if impl(ghc >=9.0)
        ghc-options: -Winvalid-haddock

    if impl(ghc >=9.2)
        ghc-options: -Wredundant-bang-patterns -Woperator-whitespace
