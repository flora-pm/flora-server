cabal-version: 3.0
name:          typed-protocols-examples
version:       0.2.0.1.0.0.0.0.1
license:       Apache-2.0
license-file:  LICENSE NOTICE
copyright:     2019-2023 Input Output Global Inc (IOG)
maintainer:
    alex@well-typed.com, duncan@well-typed.com, marcin.szamotulski@iohk.io

author:        Alexander Vieth, Duncan Coutts, Marcin Szamotulski
tested-with:   ghc ==8.10 || ==9.2 || ==9.4 || ==9.6
synopsis:      Examples and tests for the typed-protocols framework
category:      Control
build-type:    Simple

library
    exposed-modules:
        Network.TypedProtocol.Channel
        Network.TypedProtocol.Driver.Simple
        Network.TypedProtocol.PingPong.Type
        Network.TypedProtocol.PingPong.Client
        Network.TypedProtocol.PingPong.Server
        Network.TypedProtocol.PingPong.Codec
        Network.TypedProtocol.PingPong.Codec.CBOR
        Network.TypedProtocol.PingPong.Examples
        Network.TypedProtocol.ReqResp.Type
        Network.TypedProtocol.ReqResp.Client
        Network.TypedProtocol.ReqResp.Server
        Network.TypedProtocol.ReqResp.Codec
        Network.TypedProtocol.ReqResp.Codec.CBOR
        Network.TypedProtocol.ReqResp.Examples

    hs-source-dirs:   src
    default-language: Haskell2010
    other-extensions:
        GADTs RankNTypes PolyKinds DataKinds ScopedTypeVariables
        TypeFamilies TypeOperators BangPatterns

    ghc-options:
        -Wall -Wno-unticked-promoted-constructors -Wcompat
        -Wincomplete-uni-patterns -Wincomplete-record-updates
        -Wpartial-fields -Widentities -Wredundant-constraints

    build-depends:
        base,
        bytestring,
        cborg,
        serialise,
        iog-contra-tracer,
        io-classes,
        si-timers,
        time,
        typed-protocols,
        typed-protocols-cborg

test-suite test
    type:             exitcode-stdio-1.0
    main-is:          Main.hs
    hs-source-dirs:   test
    other-modules:
        Network.TypedProtocol.PingPong.Tests
        Network.TypedProtocol.ReqResp.Tests

    default-language: Haskell2010
    ghc-options:
        -rtsopts -Wall -Wno-unticked-promoted-constructors -Wno-orphans

    build-depends:
        base,
        bytestring,
        iog-contra-tracer,
        typed-protocols,
        typed-protocols-cborg,
        typed-protocols-examples,
        io-classes,
        io-sim,
        si-timers,
        QuickCheck,
        tasty,
        tasty-quickcheck
